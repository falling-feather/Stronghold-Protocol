<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‰ªçº¸éé—äº’åŠ¨</title>
    <style>
        /* --- å…¨å±€é‡ç½® --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: #f5f5f5;
            font-family: "SimSun", "Songti SC", serif;
            height: 100vh; width: 100vw; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        .app-container {
            width: 100%; height: 100%; max-width: 600px;
            position: relative; background: #fff;
            display: flex; flex-direction: column;
        }

        /* --- é¡¶éƒ¨ --- */
        .top-bar {
            position: absolute; top: 20px; right: 20px;
            display: flex; gap: 10px; z-index: 10;
        }

        .icon-btn {
            width: 40px; height: 40px; border: 2px solid #000;
            border-radius: 50%; display: flex;
            justify-content: center; align-items: center;
            font-size: 20px; font-weight: bold; background: #fff;
        }

        /* --- ä¸­é—´å±•ç¤º --- */
        .stage-area {
            flex: 1; display: flex; justify-content: center;
            align-items: center; position: relative;
            width: 100%; padding: 20px;
        }

        .paper-cut-box {
            position: relative; width: 90vw; height: 90vw;
            max-width: 400px; max-height: 400px;
        }

        .full-image {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; z-index: 1;
        }

        .grid-mask {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: grid; grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr); z-index: 2;
        }

        .grid-cell { background-color: #fff; transition: opacity 0.5s ease; }
        .grid-cell.active { opacity: 0; }

        .frame-image {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 3; pointer-events: none;
        }

        .hand-icon {
            position: absolute; width: 40px; z-index: 20;
            animation: point 1s infinite alternate; cursor: pointer;
        }
        .hand-top-right { top: 10%; right: 10%; transform: rotate(180deg); }
        .hand-bottom-right { bottom: 35%; right: 10%; transform: rotate(-90deg); }

        @keyframes point {
            from { transform: translate(0, 0) rotate(var(--r, 0deg)); }
            to { transform: translate(-5px, 5px) rotate(var(--r, 0deg)); }
        }

        /* --- åº•éƒ¨å¯¹è¯ --- */
        .dialog-area {
            position: relative; width: 100%;
            padding: 10px 20px 40px 20px;
            display: flex; align-items: flex-end; margin-bottom: 20px;
        }

        .mascot {
            width: 30%; max-width: 120px; height: auto;
            position: relative; z-index: 10;
            margin-right: -10px; object-fit: contain;
        }

        .dialog-wrapper { flex: 1; position: relative; display: flex; flex-direction: column; }

        .name-tag {
            position: absolute; top: -25px; left: 20px;
            width: 100px; height: 40px;
            background: url('./index_static/å…¶ä»–/åå­—æ¡†.png') no-repeat center;
            background-size: 100% 100%;
            display: flex; justify-content: center; align-items: center;
            z-index: 12; font-weight: bold; font-size: 18px; letter-spacing: 2px;
        }

        .dialog-content-box {
            position: relative; width: 100%;
            background: url('./index_static/å…¶ä»–/å¯¹è¯æ¡†.png') no-repeat center;
            background-size: 100% 100%; 
            padding: 25px 20px 20px 25px;
            min-height: 100px; z-index: 5; transition: height 0.2s;
        }

        #typing-text {
            font-size: 18px; line-height: 1.6; color: #000;
            font-weight: bold; min-height: 24px;
        }

        .skip-btn {
            position: absolute; bottom: -30px; right: 0;
            background: #fff; border: 2px solid #000; border-radius: 20px;
            padding: 5px 15px; font-weight: bold; cursor: pointer;
            box-shadow: 2px 2px 0 #000;
        }

        /* --- å¼¹çª—æ ·å¼ --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.75); z-index: 100;
            display: none; justify-content: center; align-items: center;
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .modal-card {
            width: 85%; height: 75%; background-color: #fff;
            border: 3px solid #000; position: relative;
            display: flex; flex-direction: column; padding: 15px;
            box-shadow: 10px 10px 0 rgba(0,0,0,0.5); border-radius: 5px;
        }

        .close-btn {
            position: absolute; top: 5px; right: 15px;
            font-size: 40px; font-weight: 900; line-height: 1;
            cursor: pointer; z-index: 102; color: #000;
        }

        .modal-header {
            display: flex; align-items: flex-start; margin-bottom: 15px;
            height: 120px; margin-top: 15px;
        }

        .modal-mascot-img {
            width: 80px; height: auto; border: 2px solid #000;
            background: #fff; margin-right: 10px; flex-shrink: 0;
            transform: translateY(-10px); box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        .modal-text-bubble {
            flex: 1; border: 2px solid #000; padding: 10px;
            font-size: 14px; line-height: 1.4; background: #fff;
            border-radius: 5px; height: 100%; overflow-y: auto; font-weight: bold;
        }

        .modal-content-display {
            flex: 1; width: 100%; border: 2px solid #000;
            background-color: #f9f9f9; display: flex;
            justify-content: center; align-items: center; overflow: hidden; padding: 10px;
        }

        .modal-random-img {
            width: 100%; height: 100%; object-fit: contain;
            filter: drop-shadow(2px 2px 5px rgba(0,0,0,0.2));
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="top-bar">
        <div class="icon-btn">ğŸ“¢</div>
        <div class="icon-btn">ğŸµ</div>
    </div>

    <div class="stage-area">
        <div class="paper-cut-box">
            <img src="./index_static/å…¶ä»–/å‰ªçº¸å±•ç¤ºå…¨è²Œ.png" class="full-image" alt="å‰ªçº¸å…¨è²Œ">
            <div class="grid-mask" id="gridMask"></div>
            <img src="./index_static/å…¶ä»–/å‰ªçº¸å±•ç¤ºæ¡†æ¡†æ¶.png" class="frame-image" alt="æ¡†æ¶">
            
            <img src="./index_static/å…¶ä»–/æ‰‹æŒ‡ç‚¹å‡».png" class="hand-icon hand-top-right" style="--r: 180deg;" onclick="openModal()">
            <img src="./index_static/å…¶ä»–/æ‰‹æŒ‡ç‚¹å‡».png" class="hand-icon hand-bottom-right" style="--r: -90deg;" onclick="openModal()">
        </div>
    </div>

    <div class="dialog-area">
        <img src="./index_static/å°é¾™.png" class="mascot" alt="å°é¾™">
        
        <div class="dialog-wrapper">
            <div class="name-tag">ç¦ ç‘</div>
            <div class="dialog-content-box">
                <p id="typing-text"></p>
            </div>
            <!-- ã€ä¿®æ”¹ç‚¹ã€‘ï¼šæ·»åŠ  onclick è·³è½¬äº‹ä»¶ -->
            <div class="skip-btn" onclick="window.location.href='water.html'">è·³è¿‡ ></div>
        </div>
    </div>
</div>

<div id="detailModal" class="modal-overlay">
    <div class="modal-card">
        <div class="close-btn" onclick="closeModal()">Ã—</div>
        <div class="modal-header">
            <img src="./index_static/å°é¾™.png" class="modal-mascot-img">
            <div class="modal-text-bubble">
                <p id="modal-typing-text"></p>
            </div>
        </div>
        <div class="modal-content-display">
            <img id="modal-random-img" class="modal-random-img" src="" alt="å‰ªçº¸ç»†èŠ‚">
        </div>
    </div>
</div>

<script>
    const fullText = "è”šå¿å‰ªçº¸èµ·æºäºæ˜ä»£ï¼Œæ²³åŒ—çœè”šå¿åœ°æ–¹ä¼ ç»Ÿæ‰‹å·¥å‰ªçº¸æŠ€è‰ºï¼Œå›½å®¶çº§éç‰©è´¨æ–‡åŒ–é—äº§ä»£è¡¨æ€§é¡¹ç›®ä¹‹ä¸€ã€‚";
    const textElement = document.getElementById('typing-text');
    const gridContainer = document.getElementById('gridMask');
    
    const modalElement = document.getElementById('detailModal');
    const modalTextContent = "æ˜¯éæˆè´¥è½¬å¤´ç©ºï¼Œé’å±±ä¾æ—§åœ¨ï¼Œæƒ¯çœ‹ç§‹æœˆæ˜¥é£ã€‚ä¸€å£¶æµŠé…’å–œç›¸é€¢ï¼Œå¤ä»Šå¤šå°‘äº‹ï¼Œéƒ½ä»˜ç¬‘è°ˆä¸­ã€‚";
    const modalTextEl = document.getElementById('modal-typing-text');
    const modalImgEl = document.getElementById('modal-random-img'); 
    let modalTimer = null; 

    function initGrid() {
        for(let i = 0; i < 16; i++) {
            let cell = document.createElement('div');
            cell.classList.add('grid-cell');
            gridContainer.appendChild(cell);
        }
        startGridAnimation();
    }

    function startGridAnimation() {
        const cells = document.querySelectorAll('.grid-cell');
        let index = 0;
        const interval = setInterval(() => {
            if(index >= cells.length) { clearInterval(interval); return; }
            cells[index].classList.add('active');
            index++;
        }, 200);
    }

    function typeWriter(text, i) {
        if (i < text.length) {
            textElement.innerHTML += text.charAt(i);
            setTimeout(function() { typeWriter(text, i + 1); }, 100); 
        }
    }

    function modalTypeWriter(text, i) {
        if (i < text.length) {
            modalTextEl.innerHTML += text.charAt(i);
            modalTimer = setTimeout(function() { modalTypeWriter(text, i + 1); }, 80); 
        }
    }

    function openModal() {
        const randomIndex = Math.floor(Math.random() * 10) + 1;
        const randomPath = `./è½®æ¢å‰ªçº¸/${randomIndex}.png`;
        modalImgEl.src = randomPath;
        modalElement.style.display = 'flex';
        modalTextEl.innerHTML = "";
        if(modalTimer) clearTimeout(modalTimer);
        modalTypeWriter(modalTextContent, 0);
    }

    function closeModal() {
        modalElement.style.display = 'none';
        if(modalTimer) clearTimeout(modalTimer);
        modalTextEl.innerHTML = ""; 
    }

    window.onload = function() {
        initGrid();
        typeWriter(fullText, 0);
    };
</script>

</body>
</html>